<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Guget Fin | Dashboard</title>
    <link rel="stylesheet" href="style.css">
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="manifest" href="manifest.json">
	<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css'>
</head>


<body>

<div id="auth-screen" class="auth-overlay">
    <div class="auth-box">
        <div class="brand"><h2>Guget Fin</h2></div>
        <p class="auth-subtitle">Sua gest√£o financeira, agora na nuvem.</p>
        
        <div id="auth-splash-loader" style="text-align: center; margin: 20px 0; color: var(--text-sec);">
            <i class="fi fi-rr-spinner" style="font-size: 24px; display: inline-block; animation: spin 1s linear infinite;"></i>
            <p style="margin-top: 10px; font-size: 14px;">Conectando ao cofre...</p>
        </div>

        <div id="login-form" style="display: none;">
            <input type="email" id="login-email" placeholder="E-mail" class="auth-input">
            <input type="password" id="login-senha" placeholder="Senha" class="auth-input">
            <button class="btn-auth-primary" onclick="login()">Entrar</button>
            <p class="auth-switch">N√£o tem conta? <a href="#" onclick="toggleAuth(true)">Criar agora</a></p>
        </div>

        <div id="register-form" style="display: none;">
            <input type="text" id="register-nome" placeholder="Seu nome (ex: N√≠colas Neves)" class="auth-input">
            <input type="email" id="register-email" placeholder="Seu melhor e-mail" class="auth-input">
            
            <div class="password-wrapper">
                <input type="password" id="register-senha" placeholder="Crie uma senha forte" class="auth-input" style="margin-bottom: 0;">
                <button type="button" class="btn-eye" onclick="togglePassword('register-senha', this)"><i class="fi fi-rr-eye"></i></button>
            </div>
            
            <div class="password-wrapper" style="margin-top: 12px; margin-bottom: 12px;">
                <input type="password" id="register-senha-conf" placeholder="Confirme sua senha" class="auth-input" style="margin-bottom: 0;">
                <button type="button" class="btn-eye" onclick="togglePassword('register-senha-conf', this)"><i class="fi fi-rr-eye"></i></button>
            </div>

            <button class="btn-auth-primary" onclick="registrar()">Cadastrar</button>
            <p class="auth-switch">J√° tem conta? <a href="#" onclick="toggleAuth(false)">Fazer login</a></p>
        </div>
        
        <div id="auth-loader" style="display: none;">
            <div class="spinner"></div>
            <p>Conectando ao cofre...</p>
        </div>
    </div>
</div>

		<aside class="sidebar">
        <div class="brand"><h2>Guget Fin</h2></div>
		<div id="greeting-pc" class="greeting-box" style="display: none; margin-bottom: 25px;"></div>
        <button class="btn-novo-gasto" onclick="abrirModalGasto()">+ Novo Lan√ßamento</button>

        <div class="sidebar-middle">
			<div class="sidebar-section">
				<div class="section-header">
					<h3>Entradas</h3>
					<button onclick="abrirModalEntrada()" class="add-mini">+</button>
				</div>
				<div id="lista-entradas"></div>
				
				<div id="total-entradas-sidebar" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
					<small style="font-size: 9px; font-weight: 800; color: var(--text-sec); text-transform: uppercase; letter-spacing: 0.05em;">Total Mensal</small>
					<strong id="sidebar-total-valor" style="font-size: 13px; color: var(--dark-green); font-weight: 800;">R$ 0,00</strong>
				</div>
			</div>
			
			
        </div>

		<div class="sidebar-footer">
			<div class="system-section">
				
				<div class="options-container" id="container-opcoes">
					<button class="options-trigger" onclick="toggleMenuOpcoes(event)">
						<span class="system-icon">‚öôÔ∏è</span>
						<svg class="user-profile-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>
						</svg>
						<span class="btn-text-mobile">Op√ß√µes</span> </button>
					</button>

<div class="options-dropdown" id="menu-dropdown">

					<button class="dropdown-item option-btn" onclick="abrirModalPerfil()">
						<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
						Editar Perfil
					</button>
					<hr class="dropdown-divider">

						<button class="dropdown-item option-btn" onclick="abrirModalCartoes()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>
							Gerenciar Cart√µes
						</button>

						<button class="dropdown-item option-btn" onclick="abrirModalCategorias()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>
							Gerenciar Categorias
						</button>

						<hr class="dropdown-divider">

						<button class="dropdown-item option-btn" onclick="document.getElementById('input-import-js').click()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
							Importar Backup
						</button>
						
						<input type="file" id="input-import-js" accept=".js" style="display:none" onchange="importarDadosJS(event)">

						<button class="dropdown-item option-btn" onclick="limparMesAtual()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
							Limpar M√™s Atual
						</button>

						<button class="dropdown-item option-btn btn-save-inside" onclick="salvarAlteracoes()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>
							Criar Backup
						</button>
						
						<button class="dropdown-item option-btn" onclick="window.signOut(window.auth)">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
							Sair da Conta
						</button>

						<hr class="dropdown-divider">

						<button class="dropdown-item option-btn btn-danger-text" onclick="limparTudo()">
							<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
							Resetar App
						</button>
					</div>
				</div>
			</div>
		</div>
		</aside>

    <main>
		<header class="month-nav" style="flex-wrap: wrap;">
			<div class="nav-pc desktop-only" style="display: flex; align-items: center; gap: 10px;">
				<button onclick="mudarMes(-1)">‚ùÆ</button>
				<button onclick="mudarMes(1)">‚ùØ</button> 
				<h1 id="display-mes-ano">...</h1>
			</div>

			<div id="mobile-month-nav" class="mobile-only">
				<div class="month-item prev-month" onclick="mudarMes(-1)" id="mob-prev-month">Jan</div>
				<div class="month-item current-month" id="mob-curr-month">Fevereiro 2026</div>
				<div class="month-item next-month" onclick="mudarMes(1)" id="mob-next-month">Mar</div>
			</div>

			<div id="container-lembretes-fatura" style="display: flex; gap: 10px; flex-grow: 1; justify-content: flex-end; overflow-x: auto; padding-bottom: 5px;">
			</div>
		</header>
		
		<section id="aba-planejamento" class="tab-content" style="display: none;">	
			<div class="card chart-card" id="card-grafico">
				<div class="card-header" onclick="toggleGrafico()">
					<div class="header-title-group">
						<span id="chart-toggle-icon" class="chevron"></span>
						<h3>Fluxo Anual de Gastos</h3>
					</div>
				</div>
		
				<div class="chart-content-wrapper" id="chart-body">
					<div class="chart-main">
						<div class="chart-year-control">
							<button onclick="mudarAnoGrafico(-1)">‚ùÆ</button>
							<span id="ano-badge-dinamico">2026</span>
							<button onclick="mudarAnoGrafico(1)">‚ùØ</button>
						</div>
						<div class="chart-container">
							<canvas id="graficoSalsi"></canvas>
						</div>
					</div>
					
					<div class="chart-annual-summary">
						<div class="ann-item">
							<small>ENTRADAS (ANO)</small>
							<h4 id="ann-entradas" class="txt-green">R$ 0,00</h4>
						</div>
						<div class="ann-item">
							<small>SA√çDAS (ANO)</small>
							<h4 id="ann-saidas" class="txt-red">R$ 0,00</h4>
						</div>
						<div class="ann-item">
							<small>TOTAL CR√âDITO</small>
							<h4 id="ann-credito">R$ 0,00</h4>
						</div>
						<div class="ann-item">
							<small>TOTAL D√âBITO/PIX</small>
							<h4 id="ann-debito">R$ 0,00</h4>
						</div>
					</div>
				</div>
			</div>

			<div class="card chart-card" id="card-metas-acordeon">
				<div class="card-header" onclick="toggleMetas()">
					<div class="header-title-group">
						<span id="meta-toggle-icon" class="chevron"></span>
						<h3>Metas e Objetivos</h3>
					</div>
				</div>
				
				<div class="chart-content-wrapper" id="meta-body">
					<div id="conteudo-meta" style="width: 100%;"></div>
				</div>
			</div>
		</section>	
		
		<section id="aba-home" class="tab-content active">
		<div id="greeting-mobile" class="greeting-box mobile-only" style="display: none;"></div>
			<div class="stats-grid">
				<div class="stat-card"><small>Saldo Mensal</small><h2 id="resumo-saldo">R$ 0,00</h2></div>
				<div class="stat-card"><small>Total Cart√£o</small><h2 id="resumo-cartao">R$ 0,00</h2></div>
				<div class="stat-card"><small>% da Renda</small><h2 id="resumo-porcentagem">0%</h2></div>
			</div>

		</section>

			<div class="tables-row">
					<div class="card-stack">
					<section id="aba-fixos" class="tab-content">
						<div class="card">
							<div class="header-com-filtro">
								<h3>Gastos Fixos</h3>
								<div class="filtros-wrapper">
									<div class="custom-dropdown" id="filtro-fixos" data-value="Todos">
										<div class="dropdown-trigger"><span>Status</span> <i class="chevron"></i></div>
										<div class="dropdown-menu"></div>
									</div>
								</div>
							</div>
							
							<table id="tabela-fixos" class="desktop-only">
								<thead><tr><th>Nome</th><th>Valor</th><th>Pago</th><th></th></tr></thead>
								<tbody></tbody>
							</table>

							<div id="lista-fixos-mobile" class="mobile-only"></div>
							<div class="mobile-total-card mobile-only">
								<span>Total do M√™s</span>
								<span id="total-fixos-mobile-val">R$ 0,00</span>
							</div>
						</div>
					</section>
						
						<section id="menu-cartoes" class="tab-content">
						<div class="mobile-tabs-toggle cartoes-toggle">
							<button id="btn-sub-credito" class="active" onclick="toggleSubCartao('credito')">Cr√©dito</button>
							<button id="btn-sub-debito" onclick="toggleSubCartao('debito')">D√©bito / Pix / Dinheiro</button>
						</div>
						</section>
						
						<section id="aba-debito" class="tab-content">
						
						<div id="sub-card-debito" class="card">
							<div class="header-com-filtro">
								<h3>D√©bito / PIX / Dinheiro</h3>
								<div class="filtros-wrapper">
									<div class="custom-dropdown" id="filtro-deb-forma" data-value="Todos">
										<div class="dropdown-trigger"><span>Formas</span> <i class="chevron"></i></div>
										<div class="dropdown-menu"></div>
									</div>
									<div class="custom-dropdown" id="filtro-deb-cat" data-value="Todos">
										<div class="dropdown-trigger"><span>Categorias</span> <i class="chevron"></i></div>
										<div class="dropdown-menu"></div>
									</div>
								</div>
							</div>
							<table id="tabela-debito" class="desktop-only">
								<thead><tr><th>Item / Categoria</th><th>Tag</th><th>Valor</th><th></th></tr></thead>
								<tbody></tbody>
							</table>
							<div id="lista-debito-mobile" class="mobile-only"></div>
							<div class="mobile-total-card mobile-only">
								<span>Total do M√™s</span>
								<span id="total-debito-mobile-val">R$ 0,00</span>
							</div>
						</div>				
					</section>
					</div>
					
					<section id="aba-resumo-home" class="tab-content active">
					
					<div class="mobile-tabs-toggle home-toggle">
						<button id="btn-show-resumo" class="active" onclick="toggleSubAba('resumo')">Resumo Mensal</button>
						<button id="btn-show-terceiros" onclick="toggleSubAba('terceiros')">Gastos de Terceiros</button>
					</div>
					
					<div class="card-stack">
					<div id="card-resumo-conteudo" class="card resumo-mensal">
						<h3>Resumo Mensal</h3>
						<div class="resumo-central-item">
							<small>POR CART√ÉO / BANCO</small>
							<div id="resumo-bancos-lista"></div>
						</div>
						<div class="resumo-central-item" style="margin-top: 24px;">
							<small>POR CATEGORIA (TAGS)</small>
							<div id="resumo-tags-lista"></div>
						</div>
					</div>

					<div id="card-terceiros" class="card card-terceiros" style="display: none;">
								<div class="header-com-filtro">
									<h3>Gastos de Terceiros</h3>
									<div class="filtros-wrapper">
										<div class="custom-dropdown" id="filtro-terc-nome" data-value="Todos">
											<div class="dropdown-trigger"><span>Nomes</span> <i class="chevron"></i></div>
											<div class="dropdown-menu"></div>
										</div>
										<div class="custom-dropdown" id="filtro-terc-banco" data-value="Todos">
											<div class="dropdown-trigger"><span>Cart√µes</span> <i class="chevron"></i></div>
											<div class="dropdown-menu"></div>
										</div>
									</div>
								</div>
								
								<table id="tabela-terceiros" class="desktop-only" style="width: 100%; border-collapse: collapse;">
									<thead>
										<tr style="text-align: left; color: var(--text-sec); font-size: 11px; text-transform: uppercase; border-bottom: 1px solid #f0f0f0;">
											<th style="padding: 10px 5px;">ITEM</th>
											<th style="padding: 10px 5px;">PESSOA</th>
											<th style="padding: 10px 5px; text-align: center;">BANCO/TIPO</th>
											<th style="padding: 10px 5px; text-align: center;">PARC.</th>
											<th style="padding: 10px 5px; text-align: right;">VALOR</th>
											<th style="padding: 10px 5px;"></th>
										</tr>
									</thead>
									<tbody id="lista-terceiros"></tbody>
								</table>
								
								<div id="lista-terceiros-mobile" class="mobile-only"></div>
								<div class="mobile-total-card mobile-only">
									<span>Total do M√™s</span>
									<span id="total-terceiros-mobile-val">R$ 0,00</span>
								</div>
						</div>
					</div>
					</section>
					
					<section id="aba-cartao" class="tab-content">
						<div id="sub-card-credito" class="card">
							<div class="header-com-filtro">
								<h3>Cart√£o de Cr√©dito</h3>
								<div class="filtros-wrapper">
									<div class="custom-dropdown" id="filtro-cred-banco" data-value="Todos">
										<div class="dropdown-trigger"><span>Cart√µes</span> <i class="chevron"></i></div>
										<div class="dropdown-menu"></div>
									</div>
									<div class="custom-dropdown" id="filtro-cred-cat" data-value="Todos">
										<div class="dropdown-trigger"><span>Categorias</span> <i class="chevron"></i></div>
										<div class="dropdown-menu"></div>
									</div>
								</div>
							</div>
							
							<table id="tabela-cartao" class="desktop-only">
								<thead>
									<tr>
										<th>ITEM</th>
										<th>PARC.</th>
										<th>BANCO</th>
										<th style="text-align: right;">VALOR</th>
										<th></th>
									</tr>
								</thead>
								<tbody></tbody>
							</table>

							<div id="lista-cartao-mobile" class="mobile-only"></div>
							<div class="mobile-total-card mobile-only">
								<span>Total do M√™s</span>
								<span id="total-credito-mobile-val">R$ 0,00</span>
							</div>
						</div>
					</section>
			</div>

		<section id="aba-entradas" class="tab-content">
			<div class="card">
				<div class="meta-header-mobile">
					<h3 style="margin:0;">Entradas</h3>
					<div class="header-alinhado-direita">
						<button onclick="abrirModalEntrada()" class="btn-novo-gasto">
							+ ADD
						</button>
					</div>
				</div>
				
				<div id="lista-entradas-mobile">
					</div>
					<div class="mobile-total-card mobile-only">
						<span>Total do M√™s</span>
						<span id="total-entradas-mobile-val">R$ 0,00</span>
					</div>
			</div>
		</section>
		
    </main>

<nav class="mobile-tab-bar">
    <button class="tab-btn active" onclick="navegar('home')">
        <i class="fi fi-rr-house-blank"></i>
    </button>
    <button class="tab-btn" onclick="navegar('entradas')">
        <i class="fi fi-rr-usd-circle"></i>
    </button>
    <button class="tab-btn" onclick="navegar('cartao')">
        <i class="fi fi-rr-credit-card"></i>
    </button>
    <button class="tab-btn" onclick="navegar('fixos')">
        <i class="fi fi-rr-thumbtack"></i>
    </button>
    <button class="tab-btn" onclick="navegar('planejamento')">
        <i class="fi fi-rr-chart-simple"></i>
    </button>
    
    <button class="fab-btn" onclick="abrirModalGasto()">
        <i class="fi fi-rr-plus"></i>
    </button>
</nav>

    <dialog id="modal-gasto">
        <div class="modal-content">
            <button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
            <h3>Novo Gasto üí∏</h3>
            <form method="dialog">
                <input type="text" id="g-nome" placeholder="Descri√ß√£o" required>
                <input type="text" id="g-valor" placeholder="Valor Total R$" onblur="formatarMoeda(this)">
                <input type="date" id="g-data">
                
				<div class="input-group">
					<label>In√≠cio do Pagamento</label>
					<select id="g-inicio-pagamento">
						<option value="0">Mesmo m√™s da compra</option>
						<option value="1">M√™s seguinte (+1)</option>
						<option value="2">Daqui a 2 meses (+2)</option>
					</select>
				</div>
				
                <select id="g-tipo" onchange="ajustarCamposModal()">
                    <option value="cartao">Cart√£o de Cr√©dito</option>
                    <option value="fixo">Gasto Fixo</option>
                    <option value="debito">D√©bito / PIX</option>
                </select>
				
				<div id="div-forma-pagamento" class="input-group" style="display: none; margin-top: 10px;">
					<label>Forma de Pagamento</label>
					<select id="g-forma-pagamento" class="input-padrao" onchange="ajustarCamposModal()">
						<option value="PIX">PIX</option>
						<option value="D√©bito">Cart√£o de D√©bito</option>
						<option value="Dinheiro">Dinheiro</option>
					</select>
				</div>

                <div id="div-cartao-campos">
                    <input type="number" id="g-parcelas" value="1" min="1" placeholder="N√∫mero de parcelas">
                    <select id="g-banco"></select>
                </div>

                <select id="g-categoria"></select>
				
				<div class="input-group-checkbox">
					<label for="g-terceiro" class="checkbox-container">
						<input type="checkbox" id="g-terceiro" onchange="toggleCampoNomeTerceiro()">
						<span class="checkbox-text">Esse gasto n√£o √© meu</span>
					</label>
				</div>

				<div id="div-nome-terceiro" class="input-group" style="display: none; margin-top: 10px;">
					<input type="text" id="g-nome-terceiro" placeholder="Nome da pessoa (ex: Patr√≠cia)">
				</div>
                
                <button type="button" onclick="confirmarGasto()" style="width:100%; background:#10b981; color:white; border:none; padding:12px; border-radius:8px; cursor:pointer; font-weight:600; margin-top:10px;">Adicionar</button>
            </form>
        </div>
    </dialog>

    <dialog id="modal-entrada">
        <div class="modal-content">
            <button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
            <h3>Nova Entrada üí∞</h3>
            <form method="dialog">
                <input type="text" id="e-nome" placeholder="Descri√ß√£o">
                <input type="number" id="e-valor" placeholder="Valor R$">
                <button type="button" onclick="confirmarEntrada()" style="width:100%; background:#10b981; color:white; border:none; padding:12px; border-radius:8px; cursor:pointer; font-weight:600; margin-top:10px;">Salvar</button>
            </form>
        </div>
    </dialog>

	<dialog id="modal-config">
		<div class="modal-content">
			<button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
			<h3>Configura√ß√µes ‚öôÔ∏è</h3>
			<p style="font-size: 11px; color: #64748b; margin-bottom: 12px;">
				Bancos no formato <strong>Nome:DiaFechamento</strong> (Ex: Nubank:25, Inter:5)
			</p>
			<label>Bancos e Fechamento:</label>
			<textarea id="conf-bancos" rows="3" placeholder="Nubank:25, Inter:5"></textarea>
			
			<label>Categorias:</label>
			<textarea id="conf-categorias" rows="3"></textarea>
			
			<button type="button" onclick="salvarConfig()" style="width:100%; background:#1e293b; color:white; border:none; padding:14px; border-radius:8px; cursor:pointer; font-weight:600; margin-top:10px;">Atualizar</button>
		</div>
	</dialog>
	
	<dialog id="modal-cartoes" class="modal-largo">
		<div class="modal-content" style="width: 720px; max-width: 95vw;">
			<button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
			<h3 style="margin-bottom: 24px;">Gerenciar Cart√µes üí≥</h3>
			
			<div class="modal-split-container">
				
				<div class="modal-side">
					<h4 class="column-mini-title">Cart√µes Cadastrados</h4>
					<div id="lista-cartoes-config" class="config-list-scroll">
						</div>
				</div>

				<div class="modal-divider"></div>

				<div class="modal-side">
					<h4 class="column-mini-title">+ Adicionar Novo</h4>
					<div class="novo-cartao-form-clean">
						<div class="input-group">
							<label>Nome do Cart√£o</label>
							<input type="text" id="nc-nome" placeholder="Ex: Nubank, Inter...">
						</div>
						
						<div style="display: flex; gap: 15px;">
							<div class="input-group" style="flex: 1;">
								<label>Fechamento</label>
								<input type="number" id="nc-fechamento" placeholder="Dia" min="1" max="31">
							</div>
							<div class="input-group" style="flex: 1;">
								<label>Vencimento</label>
								<input type="number" id="nc-vencimento" placeholder="Dia" min="1" max="31">
							</div>
						</div>
						
						<button type="button" class="btn-novo-gasto" onclick="adicionarNovoCartao()" style="margin-top: 20px; width: 100%;">
							Confirmar Cadastro
						</button>
					</div>
				</div>
			</div>
		</div>
	</dialog>

	<dialog id="modal-categorias" class="modal-largo">
		<div class="modal-content" style="width: 700px; max-width: 95vw;">
			<button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
			<h3 style="margin-bottom: 24px;">Minhas Categorias üè∑Ô∏è</h3>
			
			<div class="modal-split-container">
				<div class="modal-side">
					<h4 class="column-mini-title">Tags Ativas</h4>
					<div id="lista-tags-config" class="config-list-scroll"></div>
				</div>

				<div class="modal-divider"></div>

				<div class="modal-side">
					<h4 class="column-mini-title">+ Nova Tag</h4>
					<div class="novo-cartao-form-clean">
						<div class="input-group">
							<label>Nome da Categoria</label>
							<input type="text" id="nt-nome" placeholder="Ex: Lazer, Estudos...">
						</div>
						<button type="button" class="btn-novo-gasto" onclick="adicionarNovaTag()" style="margin-top: 10px; width: 100%;">
							Salvar Categoria
						</button>
					</div>
				</div>
			</div>
		</div>
	</dialog>

	<dialog id="modal-detalhes" class="modal-estilizado">
		<div class="modal-header" style="display: flex; justify-content: space-between; align-items: center; padding: 20px 25px;">
			<h2 id="det-nome" style="margin: 0;">Detalhes</h2>
			<button class="btn-close-modal" onclick="this.closest('dialog').close()">√ó</button>
		</div>
		
		<div class="modal-body-detalhes">
			<div class="det-linha"><strong>Data de Compra</strong> <span id="det-data"></span></div>
			<div class="det-linha"><strong>Valor Total</strong> <span id="det-valor-total"></span></div>
			
			<div id="det-bloco-parcelas" style="background: #f9f9f9; border-radius: 8px; margin: 5px 0;">
				<div class="det-linha"><strong>Valor Parcela</strong> <span id="det-valor-parcela"></span></div>
				<div class="det-linha"><strong>Qtd. Parcelas</strong> <span id="det-qtd-parcelas"></span></div>
			</div>

			<div class="det-linha"><strong>Cart√£o/Banco</strong> <span id="det-banco"></span></div>
			<div class="det-linha"><strong>Categoria</strong> <span id="det-categoria"></span></div>
		</div>
	</dialog>

	<dialog id="modal-meta" class="modal-estilizado">
		<div style="padding: 20px;">
			<h2 style="color: var(--dark-green); margin-bottom: 15px;">Definir Meta</h2>
			<input type="text" id="meta-nome" placeholder="Ex: Viagem para Mil√£o" style="width: 100%; margin-bottom: 10px;">
			<input type="text" id="meta-valor-total" placeholder="Valor Total R$" oninput="formatarMoeda(this)" style="width: 100%; margin-bottom: 10px;">
			<input type="text" id="meta-valor-atual" placeholder="J√° guardado R$" oninput="formatarMoeda(this)" style="width: 100%; margin-bottom: 20px;">
			
			<div style="display: flex; gap: 10px;">
				<button onclick="salvarMeta()" style="flex: 1; background: var(--dark-green); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer;">Salvar</button>
				<button onclick="this.closest('dialog').close()" style="flex: 1; background: #f0f2f1; border: none; border-radius: 8px; cursor: pointer;">Cancelar</button>
			</div>
		</div>
	</dialog>

	<dialog id="modal-perfil" class="modal-estilizado">
		<div style="padding: 25px;">
			<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="color: var(--dark-green); margin: 0;">Meu Perfil</h2>
                <button class="btn-close-modal" onclick="this.closest('dialog').close()" style="position: static;">√ó</button>
            </div>
			<label class="input-label">Nome de Exibi√ß√£o</label>
            <input type="text" id="perfil-nome" placeholder="Seu nome" style="width: 100%; margin-bottom: 15px;">
			
            <label class="input-label">E-mail</label>
            <input type="email" id="perfil-email" placeholder="Seu e-mail" style="width: 100%; margin-bottom: 15px;" disabled title="Por seguran√ßa, o e-mail atual n√£o pode ser alterado por aqui no momento.">
			
            <label class="input-label">Nova Senha (deixe em branco para n√£o mudar)</label>
            <div class="password-wrapper">
                <input type="password" id="perfil-senha" placeholder="Digite a nova senha" style="width: 100%; margin-bottom: 20px;">
                <button type="button" class="btn-eye" onclick="togglePassword('perfil-senha', this)" style="top: 15px;"><i class="fi fi-rr-eye"></i></button>
            </div>

			<button onclick="salvarPerfil()" style="width: 100%; background: var(--dark-green); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: 700; cursor: pointer;">Salvar Altera√ß√µes</button>
		</div>
	</dialog>

	<script>
	  if ('serviceWorker' in navigator) {
		navigator.serviceWorker.register('sw.js')
		  .then(() => console.log("PWA Ativo!"))
		  .catch((err) => console.log("Erro no PWA:", err));
	  }
	</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, updateProfile, updateEmail, updatePassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
  // üëá MUDAN√áA 1: Adicionado o onSnapshot aqui na importa√ß√£o
  import { getFirestore, doc, setDoc, getDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD1HyxzZ-YFMMbMSIwBDDKfNWdCWHb07AY",
    authDomain: "guget-fin.firebaseapp.com",
    projectId: "guget-fin",
    storageBucket: "guget-fin.firebasestorage.app",
    messagingSenderId: "626285959649",
    appId: "1:626285959649:web:9b1006694a4d05fa899aa0"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.auth = auth;
  window.db = db;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
  window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window.onAuthStateChanged = onAuthStateChanged;
  window.signOut = signOut;
  window.doc = doc;
  window.setDoc = setDoc;
  window.getDoc = getDoc;
  window.onSnapshot = onSnapshot;
  window.updateProfile = updateProfile;
  window.updateEmail = updateEmail;
  window.updatePassword = updatePassword;  

  // üëá A M√ÅGICA: Puxa o gatilho do Vigia s√≥ depois que TUDO acima carregou
  if (window.iniciarVigia) {
      window.iniciarVigia();
  }
</script>

<script src="app.js"></script>

</body>

</html>



